@model Web.Models.Actividad 
@using Web.Models

@{
    ViewBag.Title = "InscribirseEnActividad";
}

<h1>Inscripción a Actividades Disponibles</h1>

<div id="kendotable">
@(Html.Kendo().Grid<Web.Models.Actividad>()
    .Name("tablaActividades") 
    .Columns(columns =>
    {
        columns.Bound(p => p.nombre).Sortable(true);
        columns.Bound(p => p.descripcion).Sortable(true);
        columns.Bound(p => p.fechaInicio).Width(70).Format("{0:dd/MM/yyyy}");
        columns.Bound(p => p.fechaFin).Width(70).Format("{0:dd/MM/yyyy}");
        columns.Bound(p => p.vacantesDisponibles).Title("Vacantes");
        columns.Command(c => c.Custom("Inscribir").Click("Registrar"));
                 
    })
    .Selectable()
    .Filterable(filterable => filterable
        .Extra(false)
        .Operators(operators => operators
            .ForString(str => str.Clear()
                .StartsWith("Empezar con")
                .IsEqualTo("Es igual a")
                .IsNotEqualTo("Diferente a"))
            .ForNumber(number => number.Clear()
                .IsGreaterThan("Es mayor a")
                .IsLessThan("Es menor a")
                .IsEqualTo("Es igual a")
                .IsNotEqualTo("Es diferente a"))
        )
    )
    .DataSource(datasource => datasource
        .Ajax()
        .Read(read=> read.Action("LeerActividadesDisponible", "Actividad"))
    )
)
 </div>


<script type="text/javascript">
    function Registrar(e) {
        e.preventDefault();
        var grid = $('#tablaActividades').data('kendoGrid');
        var row = grid.select();
        var dataItem = grid.dataItem(row);
        var id = dataItem.id;
        location = "@Url.Action("RealizarInscripcion")" + "?id=" + id;
    }
  </script>